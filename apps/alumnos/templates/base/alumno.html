<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %} SED | Alumno {% endblock %}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Configuración rápida de Tailwind para dark mode (clases 'class')
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: {
                light: "#34D399", // verde claro
                DEFAULT: "#10B981", // verde medio
                dark: "#059669", // verde oscuro
              },
            },
          },
        },
      };
    </script>

    <!-- Tipografía -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>

    <!-- Iconos (usando Heroicons en vez de Font Awesome para algo más liviano y moderno) -->
    <!-- Heroicons SVG: https://heroicons.com/ -->
    <!-- Asegúrate de copiar los íconos SVG que uses (abajo verás ejemplos) -->
  </head>

  <body
    class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen flex flex-col md:flex-row transition-colors duration-300"
  >
    <!-- Header móvil -->
    <header
      class="bg-primary p-4 flex items-center justify-between md:hidden shadow-md dark:bg-gray-800"
    >
      <a herf="{%url 'alumno:bienvenida_alumno' usuario_id=usuario_id% }"
        >SED</a
      >
      <div class="flex items-center space-x-4">
        <!-- Botón modo oscuro -->
        <button
          id="theme-toggle"
          aria-label="Cambiar tema"
          class="focus:outline-none focus:ring-2 focus:ring-white rounded text-white"
        >
          <!-- Icono de sol/luna (inicial: sol) -->
          <svg
            id="icon-sun"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 hidden dark:block"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3v2m0 14v2m9-9h-2M5 12H3m16.364-6.364l-1.414 1.414M6.05 17.95l-1.414 1.414m12.728 0l1.414-1.414M6.05 6.05L4.636 7.464"
            />
          </svg>
          <svg
            id="icon-moon"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 dark:hidden"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3C9.243 3 6.727 4.098 4.929 6.071c-.571.57-.063 1.557.693 1.557.317 0 .626-.121.854-.34A7.962 7.962 0 0112 5a8 8 0 010 16c-3.597 0-6.643-2.388-7.595-5.64a.997.997 0 00-1.324-.614C2.126 15.231 2 15.61 2 16a8 8 0 0010 7.746c1.517.17 2.97-.15 4.327-.888A7.962 7.962 0 0112 21a8 8 0 100-16z"
            />
          </svg>
        </button>
        <!-- Botón menú -->
        <button
          id="menu-toggle"
          aria-label="Abrir menú lateral"
          class="text-white text-2xl focus:outline-none focus:ring-2 focus:ring-white rounded"
        >
          <!-- Icono hamburguesa -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
      </div>
    </header>

    <!-- Overlay móvil para sidebar -->
    <div
      id="overlay"
      class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden transition-opacity duration-300"
    ></div>

    <!-- Contenedor principal: Sidebar + Main -->
    <div class="flex flex-1 overflow-hidden">
      <!-- Sidebar -->
      <aside
        id="sidebar"
        class="bg-primary text-white w-64 p-6 space-y-8 transform -translate-x-full md:translate-x-0 md:static md:block transition-transform duration-300 z-50 md:z-auto h-full fixed md:relative overflow-y-auto shadow-lg"
      >
        <div>
          <a href="{% url 'alumno:bienvenida_alumnos' usuario_id=usuario_id %}"
            >SED</a
          >
          <p class="text-sm text-white/80 mb-6">
            SISTEMA DE EVALUACIÓN DOCENTE
          </p>

          <!-- Navegación -->
          <nav class="space-y-2 text-base">
            <a
              href="{% url 'alumno:perfil_alumno' usuario_id=usuario_id %}"
              class="flex items-center hover:bg-primary-light p-2 rounded-lg transition-colors duration-200"
            >
              <!-- Icono Home -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 9.75L12 3l9 6.75v9a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18.75v-9z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 22V12h6v10"
                />
              </svg>
              Perfil
            </a>
            <a
              href="{% url 'alumno:explorar' usuario_id=usuario_id %}"
              class="flex items-center hover:bg-primary-light p-2 rounded-lg transition-colors duration-200"
            >
              <!-- Icono Chart -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M11 11V3m0 8h8m-8 8v-8m0 8h8m-8 0H3"
                />
              </svg>
              Explorar
            </a>
            <a
              href="{% url 'alumno:evaluar_docente' usuario_id=usuario_id %}"
              class="flex items-center hover:bg-primary-light p-2 rounded-lg transition-colors duration-200"
            >
              <!-- Icono Usuario -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5.121 17.804A9 9 0 1118.879 6.196 9 9 0 015.121 17.804z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 11a4 4 0 100-8 4 4 0 000 8zM16 17a8 8 0 00-8 0"
                />
              </svg>
              Evaluar
            </a>
          </nav>
        </div>

        <div class="pt-6 border-t border-white/20">
          <a
            href="{% url 'core:logout' %}"
            class="flex items-center justify-center hover:bg-primary-light p-2 rounded-lg transition-colors duration-200"
          >
            <!-- Icono Salir -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-2"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"
              />
            </svg>
            Salir
          </a>
        </div>
      </aside>

      <!-- Main content -->
      <main
        class="flex-1 p-6 overflow-auto min-h-0 bg-white dark:bg-gray-800 rounded-tr-2xl md:rounded-none shadow-inner transition-colors duration-300"
      >
        {% block content %}
        <!-- Aquí va tu contenido dinámico -->
        {% endblock %}
      </main>
    </div>

    <!-- Script para interacción -->
    <script>
      // Elementos
      const menuToggle = document.getElementById("menu-toggle");
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const themeToggle = document.getElementById("theme-toggle");
      const iconSun = document.getElementById("icon-sun");
      const iconMoon = document.getElementById("icon-moon");
      const htmlEl = document.documentElement;

      // Funciones menú
      function openMenu() {
        sidebar.classList.remove("-translate-x-full");
        overlay.classList.remove("hidden");
      }

      function closeMenu() {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
      }

      menuToggle?.addEventListener("click", () => {
        if (sidebar.classList.contains("-translate-x-full")) {
          openMenu();
        } else {
          closeMenu();
        }
      });

      overlay?.addEventListener("click", closeMenu);

      window.addEventListener("resize", () => {
        if (window.innerWidth >= 768) {
          closeMenu();
        }
      });

      // Función modo oscuro
      function toggleTheme() {
        if (htmlEl.classList.contains("dark")) {
          htmlEl.classList.remove("dark");
          localStorage.setItem("theme", "light");
          iconSun.classList.add("hidden");
          iconMoon.classList.remove("hidden");
        } else {
          htmlEl.classList.add("dark");
          localStorage.setItem("theme", "dark");
          iconMoon.classList.add("hidden");
          iconSun.classList.remove("hidden");
        }
      }

      themeToggle?.addEventListener("click", toggleTheme);

      // Al cargar la página, aplicar tema guardado o sistema
      (function initTheme() {
        const savedTheme = localStorage.getItem("theme");
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;

        if (savedTheme === "dark" || (!savedTheme && prefersDark)) {
          htmlEl.classList.add("dark");
          iconMoon.classList.add("hidden");
          iconSun.classList.remove("hidden");
        } else {
          htmlEl.classList.remove("dark");
          iconSun.classList.add("hidden");
          iconMoon.classList.remove("hidden");
        }
      })();
    </script>
  </body>
</html>
